<!DOCTYPE html>
<html lang="en">

    <head>
        <title>Simple Map</title>
        <meta name="viewport" content="initial-scale=1.0">
        <meta charset="utf-8">
        <link rel="stylesheet" href="css/index.css">
       <!-- <style>
            /* Always set the map height explicitly to define the size of the div
             * element that contains the map. */
            #map {
                height: 100%;
            }
            /* Optional: Makes the sample page fill the window. */
            html, body {
                height: 100%;
                margin: 0;
                padding: 0;
            }
        </style> -->
    </head>
    <body>
        Main Page
        <h3>Borg at work</h3>
        <div class="MapContainer" style="height:500px; width: 500px;">
            <div id="map"></div>
        </div>
        <div class="FormContainer">

        </div>
        <script>
            var latlong = { lng: 19.937327, lat: 50.061769};
            var randomJSON = {
                "type": "Feature",
                "properties": {
                    "name": "HELL",
                    "amenity": "EXGIRLFRIENDS HOUSE",
                    "popupContent": "DANGER DANGER DANGER. DO NOT GO HERE!!",
                    "marker-color": "#eb7912",
                    "marker-size": "medium",
                    "marker-symbol": "cemetery"
                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [19.965785, 50.057146]
                }
            };
            var gmap, marker1, currMarker;
            var geocoder;
            function boobz(geoJson){
                console.log("added geoJson");
            }
            function initMap() {
                gmap = new google.maps.Map(document.getElementById('map'), {
                    center: latlong,
                    zoom: 13
                });
                geocoder = new google.maps.Geocoder;
                // marker1 = new google.maps.Marker({
                //     position: latlong,
                //     map: gmap
                // });

                google.maps.event.addListener(gmap, 'click', function(event) {
                    if(currMarker != null){
                        currMarker.setMap(null);
                    }
                    currMarker = new google.maps.Marker({
                        position: event.latLng,
                        map: gmap
                    });
                    google.maps.event.addListener(currMarker, 'click', function() {
                        //infowindow.open(gmap, marker);
                        if (currMarker != null) {
                            currMarker.setMap(null);
                        }
                        geocoder.geocode({'location': event.latLng}, function(results,status){
                                if(status==='OK'){
                                    window.alert('your address = ' + results[0].formatted_address);
                                }else{
                                    window.alert('please select a valid address');
                                }
                            }
                        );
                    });
                });

                var res = gmap.data.addGeoJson(randomJSON);
                gmap.data.toGeoJson(boobz);
            }
        </script>

        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAfnWK4Eok5jsiT0nr7v_xNz3vfab99vGA&callback=initMap"
                async defer>
        </script>
    </body>
</html>